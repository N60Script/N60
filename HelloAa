-- +Gui Desync

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local hum = char:FindFirstChildOfClass("Humanoid") or char:WaitForChild("Humanoid")

-- GUI
local gui = Instance.new("ScreenGui", game.CoreGui)

-- =================== button Desync ===================
local desyncBtn = Instance.new("TextButton", gui)
desyncBtn.Size = UDim2.new(0,80,0,30)
desyncBtn.Position = UDim2.new(1, -90, 0.5, -15)
desyncBtn.Text = "desync"
desyncBtn.Font = Enum.Font.SourceSansBold
desyncBtn.TextSize = 18
desyncBtn.TextColor3 = Color3.new(1,1,1)
desyncBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)
desyncBtn.BorderSizePixel = 0

local desyncActive = false
local desyncConn
local delayTime = 999 -- fast

-- ðŸ”Ž
local function getClonerTool()
    -- Ø§Ù„Ø¨Ø­Ø« Backpack
    for _, tool in ipairs(player.Backpack:GetChildren()) do
        if tool:IsA("Tool") and string.find(string.lower(tool.Name), "cloner") then
            return tool
        end
    end
    -- Ø§Ù„Ø¨Ø­Ø« StarterGear
    for _, tool in ipairs(player.StarterGear:GetChildren()) do
        if tool:IsA("Tool") and string.find(string.lower(tool.Name), "cloner") then
            return tool
        end
    end
    return nil
end

desyncBtn.MouseButton1Click:Connect(function()
    desyncActive = not desyncActive
    desyncBtn.BackgroundColor3 = desyncActive and Color3.fromRGB(50,50,50) or Color3.fromRGB(0,0,0)

    if desyncActive then
        -- Ø£Ø¯Ø§Ø© Cloner
        local clonerTool = getClonerTool()
        if clonerTool then
            clonerTool.Parent = char
        end

        -- ØªØ´ØºÙŠÙ„ F
        pcall(function()
            keypress(Enum.KeyCode.F)
        end)

        -- Desync
        desyncConn = RunService.Heartbeat:Connect(function()
            if not hrp.Parent then return end
            local base = hrp.CFrame
            task.spawn(function()
                task.wait(delayTime)
                hrp.CFrame = base
            end)
        end)
    else
        -- F Desync
        pcall(function()
            keyrelease(Enum.KeyCode.F)
        end)

        if desyncConn then
            desyncConn:Disconnect()
            desyncConn = nil
        end
    end
end)

-- ===================
 Speed (VFly + WalkSpeed) ===================
local speedBtn = Instance.new("TextButton", gui)
speedBtn.Size = desyncBtn.Size
speedBtn.Position = UDim2.new(1, -90, 0.5, -55)
speedBtn.Text = "speed"
speedBtn.Font = Enum.Font.SourceSansBold
speedBtn.TextSize = 18
speedBtn.TextColor3 = Color3.new(1,1,1)
speedBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)
speedBtn.BorderSizePixel = 0

local walkSpeedDefault = hum.WalkSpeed
local walkSpeedBoost = 18
local vflyActive = false
local vflyConn

local function startVFly()
    if vflyConn then vflyConn:Disconnect() end
    vflyConn = RunService.RenderStepped:Connect(function()
        if not vflyActive then return end
        local moveDir = hum.MoveDirection
        if moveDir.Magnitude > 0 then
            hrp.Velocity = Vector3.new(moveDir.X * walkSpeedBoost, hrp.Velocity.Y, moveDir.Z * walkSpeedBoost)
        else
            hrp.Velocity = Vector3.new(0, hrp.Velocity.Y, 0)
        end
    end)
end

local function stopVFly()
    if vflyConn then vflyConn:Disconnect() vflyConn = nil end
    hum.WalkSpeed = walkSpeedDefault
end

speedBtn.MouseButton1Click:Connect(function()
    vflyActive = not vflyActive
    if vflyActive then
        speedBtn.BackgroundColor3 = Color3.fromRGB(0,255,0)
        hum.WalkSpeed = walkSpeedBoost
        startVFly()
    else
        speedBtn.BackgroundColor3 = Color3.fromRGB(255,0,0)
        stopVFly()
    end
end)

-- Humanoid
player.CharacterAdded:Connect(function(c)
    char = c
    hrp = char:WaitForChild("HumanoidRootPart")
    hum = char:WaitForChild("Humanoid")
    if vflyActive then
        hum.WalkSpeed = walkSpeedBoost
        startVFly()
    else
        hum.WalkSpeed = walkSpeedDefault
    end
end)
