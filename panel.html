<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>N60 Panel</title>
<style>
body{background:#111;color:#fff;font-family:Arial;display:flex;justify-content:center;align-items:center;height:100vh}
.box{background:#000;padding:25px;width:500px}
input,textarea,button{
  width:100%;
  margin-top:10px;
  background:#111;
  color:#fff;
  border:1px solid #333;
  padding:10px
}
</style>
</head>
<body>

<div class="box">
  <input id="filename" placeholder="حط اسم ملفك">
  <textarea id="script" rows="12" placeholder="حط سكربتك هنا"></textarea>
  <button onclick="openRAW()">RAW</button>
</div>

<script>
let user = localStorage.getItem("currentUser");
let users = JSON.parse(localStorage.getItem("users") || "{}");

if(!user || !users[user]) location.href="index.html";

filename.oninput = () => {
  let name = filename.value.trim();
  if(!name) return;

  if(!users[user].files[name]){
    users[user].files[name] = "";
    localStorage.setItem("users", JSON.stringify(users));
  }

  script.value = users[user].files[name];
};

script.oninput = () => {
  let name = filename.value.trim();
  if(!name) return;
  users[user].files[name] = script.value;
  localStorage.setItem("users", JSON.stringify(users));
};

function openRAW(){
  let name = filename.value.trim();
  if(!name) return;
  window.open(
    "raw.html?u=" + user + "&f=" + name,
    "_blank"
  );
}
</script>

</body>
</html>
